<html>
    <head>
        <title>allergy probability machine learning program</title>
    </head>
    <body>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@0.14.1/dist/tf.min.js"></script>
<script>
   
    var xs=[[5],[20],[30],[10],[15]];
    var ys=[[false],[true],[true],[false],[false]];
    document.body.innerHTML="<p style='font-family: sans-serif'>pls wait the program is still training</p>";  
    const x=tf.tensor2d(xs);
    const y=tf.tensor2d(ys);
    const model=tf.sequential();
    const hidden = tf.layers.dense({
        units:2,
        inputShape:[1],
        activation:'sigmoid'
    });
    const output = tf.layers.dense({
        units:1,
        activation:'sigmoid'
    });
    model.add(hidden);
    model.add(output);
    const config = {
        optimizer:tf.train.sgd(0.1),
        loss:tf.losses.meanSquaredError
    }
    model.compile(config);
    train().then(function (){
          var risk =parseInt(prompt("how many risks ( allergic ) do you want to take today?"));
        document.body.innerHTML="<p style='font-family: sans-serif'>sooo, the probability of you getting allergies after taking "+risk+" risks is: </p>";
        model.predict(x).print();
        console.log("training complete");
        document.body.innerHTML+=Math.round(model.predict(tf.tensor2d([[risk]])).dataSync()*100)+"%";
    });
    async function train(){
        for(let i=0;i<100;i++){
        const h = await model.fit(x,y,{epochs:10});
        console.log(h.history.loss[0]);
        }
    }
</script>
<span id="span"></span>
    </body>
</html>
